(this.webpackJsonpcasualist=this.webpackJsonpcasualist||[]).push([[0],{41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},60:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n(0),i=n.n(s),c=n(14),r=n.n(c),l=n(16),o=(n(41),n(28)),d=n(8),u=n(34),m=n(3),h=n(4),p=n(6),j=n(5),b=n(7),f=(n(42),i.a.createContext({list:{},items:[],currentItem:{},displayItems:[],filterItems:function(){},updateCurrItem:function(){},updateDisplayItemsOrder:function(){},updateFilter:function(){},loadList:function(){},loadListItems:function(){},addItem:function(){},deleteItem:function(){},patchList:function(){},patchItem:function(){}})),O=(n(43),{API_ENDPOINT:"https://desolate-beach-32598.herokuapp.com/api",API_KEY:"6bd21e0f-8d76-4659-b44b-caa630060842"}),g=n(35),I=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).state={linkHidden:!0,activeLink:""},a.handleSubmit=function(t){t.preventDefault();var e=t.target.listname.value,n=Object(g.a)(6),s={url_path:n,name:e,item_order:[]},i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)},body:JSON.stringify(s)};fetch("".concat(O.API_ENDPOINT,"/lists"),i).then((function(t){if(!t.ok)throw new Error("Could not create list");return t.json()})).catch((function(t){return t.message})),a.setState({linkHidden:!1,activeLink:n})},a.copyLink=function(t){a.linkRef.current.type="text",a.linkRef.current.focus(),a.linkRef.current.select(),document.execCommand("copy"),a.linkRef.current.type="hidden"},a.linkRef=i.a.createRef(),a}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"LandingPage view_container",children:[Object(a.jsxs)("div",{className:"LandingPage_text",children:[Object(a.jsx)("h1",{children:"Casualist"}),Object(a.jsx)("h2",{children:"The fast-casual checklist maker."}),Object(a.jsx)("p",{children:"This app is designed to help a user easily and quickly create a dynamic and collaborative checklist.  Simply enter the title of the new list below and hit 'Create List'. Once the list is created just share the provided link with any collaborators. No sign-up or login needed, no wasted time."})]}),Object(a.jsxs)("div",{className:"LandingPage_create",children:[Object(a.jsxs)("form",{className:"LandingPage_form",onSubmit:function(e){return t.handleSubmit(e)},children:[Object(a.jsx)("label",{htmlFor:"listname",className:"LandingPage_label",children:"Start a New List"}),Object(a.jsx)("input",{type:"text",name:"listname",id:"listname",className:"LandingPage_listname",placeholder:"Enter new list title."}),Object(a.jsx)("button",{type:"submit",id:"listname_submit",children:"Create List"})]}),Object(a.jsxs)("div",{className:"LandingPage_link ".concat(this.state.linkHidden?"hidden":""),children:[Object(a.jsxs)("a",{ref:this.linkRef,href:"https://casualist.vercel.app/".concat(this.state.activeLink),children:["https://casualist.vercel.app/",this.state.activeLink]}),Object(a.jsx)("button",{className:"copylink",onClick:function(){return t.copyLink()},children:"Copy Link"}),Object(a.jsx)("input",{ref:this.linkRef,type:"hidden",value:"https://casualist.vercel.app/".concat(this.state.activeLink),readOnly:!0})]})]})]})}}]),n}(s.Component);I.contextType=f;var x=I,v=(n(44),n(45),n(46),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleChange=function(t,e,n){var a=t.target.value;n(a),e(a)},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=[],n=this.context.allItems.map((function(t){return e.includes(t.assign)||""===t.assign?null:(e.push(t.assign),Object(a.jsx)("option",{value:"assigned: ".concat(t.assign),children:t.assign},t.id))}));return Object(a.jsx)("div",{className:"Filter",children:Object(a.jsx)(f.Consumer,{children:function(e){var s=e.filterItems,i=e.updateFilter;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"Filter_select",id:"Filter_label",children:"Filter:"}),Object(a.jsxs)("select",{name:"Filter_select",id:"Filter_select",value:t.context.currentFilter,defaultChecked:!0,onChange:function(e){return t.handleChange(e,s,i)},children:[Object(a.jsx)("option",{value:"all",children:"All"}),Object(a.jsx)("option",{value:"todo",children:"Status: To Do"}),Object(a.jsx)("option",{value:"doing",children:"Status: Doing"}),Object(a.jsx)("option",{value:"done",children:"Status: Done"}),n]})]})}})})}}]),n}(s.Component));v.contextType=f;var _=v,y=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).copyLink=function(t){a.linkRef.current.type="text",a.linkRef.current.focus(),a.linkRef.current.select(),document.execCommand("copy"),a.linkRef.current.type="hidden"},a.linkRef=i.a.createRef(),a}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"Header",children:[Object(a.jsx)("h2",{children:Object(a.jsx)(l.b,{className:"router_link",to:"/",children:"Casualist"})}),Object(a.jsxs)("div",{className:"Header_controls",children:[Object(a.jsx)(_,{}),Object(a.jsxs)("div",{className:"Header_link",children:[Object(a.jsxs)("a",{href:"https://casualist.vercel.app/".concat(this.context.list.url_path),children:["https://casualist.vercel.app/",this.context.list.url_path]}),Object(a.jsx)("button",{className:"copylink",onClick:function(){return t.copyLink()},children:"Copy Link"}),Object(a.jsx)("input",{ref:this.linkRef,type:"hidden",value:"https://casualist.vercel.app/".concat(this.context.list.url_path),readOnly:!0})]})]})]})}}]),n}(s.Component);y.contextType=f;var N=y,C=n(15),k=n.n(C),L=n(19),E=(n(60),n(61),n(62),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleClick=function(e,n){n(t.props.item_id,{status:e.target.id})},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)(f.Consumer,{children:function(e){var n=e.patchItem;return Object(a.jsxs)("div",{className:"StatusBar",children:[Object(a.jsx)("div",{className:"StatusBar_tog ".concat("todo"===t.props.status?"Item_todo":""),id:"todo",onClick:function(e){return t.handleClick(e,n)},children:"To Do"}),Object(a.jsx)("div",{className:"StatusBar_tog ".concat("doing"===t.props.status?"Item_doing":""),id:"doing",onClick:function(e){return t.handleClick(e,n)},children:"Doing"}),Object(a.jsx)("div",{className:"StatusBar_tog ".concat("done"===t.props.status?"Item_done":""),id:"done",onClick:function(e){return t.handleClick(e,n)},children:"Done"})]})}})}}]),n}(s.Component));E.contextType=f;var A=E,D=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleClick=function(e,n,a){a(n),"edit"===e.target.value?t.props.toggleEditItemModal():t.props.toggleItemDetailModal()},t.handleDelete=function(t,e){e(t)},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)(L.b,{draggableId:this.props.id.toString(),index:this.props.index,children:function(e){return Object(a.jsx)("div",Object(d.a)(Object(d.a)(Object(d.a)({className:"Item",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(a.jsx)(f.Consumer,{children:function(e){var n=e.updateCurrItem,s=e.deleteItem;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"Item_left",children:[Object(a.jsx)("h4",{children:t.props.item_name}),Object(a.jsxs)("p",{className:"".concat(t.props.assigned?"":"hidden"),children:["Assigned to: ",t.props.assigned]}),Object(a.jsx)(A,{status:t.props.status,item_id:t.props.id})]}),Object(a.jsxs)("div",{className:"Item_right",children:[Object(a.jsx)("button",{className:"Item_button",onClick:function(e){return t.handleDelete(t.props.id,s)},children:"Delete"}),Object(a.jsx)("button",{className:"Item_button",value:"edit",onClick:function(e){return t.handleClick(e,t.props.id,n)},children:"Edit"}),Object(a.jsx)("button",{className:"Item_button",value:"details",onClick:function(e){return t.handleClick(e,t.props.id,n)},children:"Details"})]})]})}})}))}})}}]),n}(s.Component);D.contextType=f;var S=D,w=(n(64),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleSubmit=function(e,n){e.preventDefault(),n({name:e.target.form_name.value}),t.props.toggleEditListModal()},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.context.list;return Object(a.jsx)("div",{className:"EditList",children:Object(a.jsx)(f.Consumer,{children:function(n){var s=n.patchList;return Object(a.jsxs)("form",{className:"EditList_form",onSubmit:function(e){return t.handleSubmit(e,s)},children:[Object(a.jsxs)("div",{className:"EditList_top",children:[Object(a.jsx)("label",{htmlFor:"form_name",className:"EditList_label",children:"Name:"}),Object(a.jsx)("input",{id:"form_name",name:"form_name",className:"EditList_input",type:"text",defaultValue:e.name})]}),Object(a.jsxs)("div",{className:"EditList_bottom",children:[Object(a.jsx)("button",{type:"submit",className:"EditList_button",children:"Submit"}),Object(a.jsx)("button",{type:"button",className:"EditList_button",onClick:function(){return t.props.toggleEditListModal()},children:"Cancel"})]})]})}})})}}]),n}(s.Component));w.contextType=f;var M=w,P=(n(65),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={showAssignInput:!0},t.handleSelect=function(e){"new"===e.target.value?t.setState({showAssignInput:!0}):t.setState({showAssignInput:!1})},t.handleSubmit=function(e,n){e.preventDefault(),n({list_id:t.context.list.id,name:e.target.form_name.value,assign:t.state.showAssignInput?e.target.form_assign_input.value:e.target.form_assign.value,notes:e.target.form_notes.value}),t.props.toggleAddListItemModal()},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=[],n=this.context.allItems.map((function(t){return e.includes(t.assign)||""===t.assign?null:(e.push(t.assign),Object(a.jsx)("option",{value:t.assign,children:t.assign},t.id))}));return Object(a.jsx)("div",{className:"AddListItem",children:Object(a.jsx)(f.Consumer,{children:function(e){var s=e.addItem;return Object(a.jsxs)("form",{className:"AddListItem_form",onSubmit:function(e){return t.handleSubmit(e,s)},children:[Object(a.jsx)("label",{htmlFor:"form_name",className:"AddListItem_label",children:"Name:"}),Object(a.jsx)("input",{id:"form_name",name:"form_name",className:"AddListItem_input",type:"text",placeholder:"",required:!0}),Object(a.jsx)("label",{htmlFor:"form_assign",className:"AddListItem_label",children:"Assigned To:"}),Object(a.jsxs)("select",{name:"form_assign",id:"form_assign",defaultValue:"new",onChange:function(e){return t.handleSelect(e)},children:[n,Object(a.jsx)("option",{value:"new",children:"+ Add New"})]}),Object(a.jsx)("input",{id:"form_assign_input",name:"form_assign_input",className:"EditItem_input ".concat(t.state.showAssignInput?"":"hidden"," "),type:"text"}),Object(a.jsx)("label",{htmlFor:"form_notes",className:"AddListItem_label",children:"Notes:"}),Object(a.jsx)("textarea",{id:"form_notes",name:"form_notes",className:"AddListItem_input",type:"text",placeholder:""}),Object(a.jsxs)("div",{className:"AddListItem_bottom",children:[Object(a.jsx)("button",{type:"submit",className:"AddListItem_button",children:"Submit"}),Object(a.jsx)("button",{type:"button",className:"AddListItem_button",onClick:function(){return t.props.toggleAddListItemModal()},children:"Cancel"})]})]})}})})}}]),n}(s.Component));P.contextType=f;var T=P,F=(n(66),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleClick=function(){t.props.toggleEditItemModal(),t.props.toggleItemDetailModal()},t.handleDelete=function(e,n){n(e),t.props.toggleItemDetailModal()},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.context.currentItem[0];return Object(a.jsx)("div",{className:"ItemDetail",children:Object(a.jsx)("ul",{className:"ItemDetail_ul",children:Object(a.jsx)(f.Consumer,{children:function(n){var s=n.deleteItem;return Object(a.jsxs)("div",{className:"ItemDetail_item",children:[Object(a.jsxs)("div",{className:"ItemDetail_top",children:[Object(a.jsxs)("div",{className:"ItemDetail_left",children:[Object(a.jsx)("h4",{children:e.name}),Object(a.jsxs)("p",{className:"".concat(e.assign?"":"hidden"),children:["Assigned to: ",e.assign]}),Object(a.jsx)(A,{status:e.status,item_id:e.id})]}),Object(a.jsxs)("div",{className:"ItemDetail_right",children:[Object(a.jsx)("button",{className:"ItemDetail_button",onClick:function(n){return t.handleDelete(e.id,s)},children:"Delete"}),Object(a.jsx)("button",{className:"ItemDetail_button",onClick:function(){return t.handleClick()},children:"Edit"}),Object(a.jsx)("button",{className:"ItemDetail_button",onClick:function(){return t.props.toggleItemDetailModal()},children:"Back"})]})]}),Object(a.jsxs)("div",{className:"ItemDetail_bottom",children:[Object(a.jsx)("p",{className:"".concat(e.notes?"":"hidden"),children:"Notes:"}),Object(a.jsx)("p",{children:e.notes})]})]})}})})})}}]),n}(s.Component));F.contextType=f;var R=F,B=(n(67),function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={showAssignInput:!1},t.checkInitialAssign=function(e){""===e.assign&&t.setState({showAssignInput:!0})},t.handleSelect=function(e){"new"===e.target.value?t.setState({showAssignInput:!0}):t.setState({showAssignInput:!1})},t.handleSubmit=function(e,n){e.preventDefault(),n(t.context.currentItem[0].id,{name:e.target.form_name.value,assign:t.state.showAssignInput?e.target.form_assign_input.value:e.target.form_assign.value,notes:e.target.form_notes.value}),t.props.toggleEditItemModal()},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this.context.currentItem[0];this.checkInitialAssign(t)}},{key:"render",value:function(){var t=this,e=this.context.currentItem[0],n=[],s=this.context.allItems.map((function(t){return n.includes(t.assign)||""===t.assign?null:(n.push(t.assign),Object(a.jsx)("option",{value:t.assign,children:t.assign},t.id))}));return Object(a.jsx)("div",{className:"EditItem",children:Object(a.jsx)(f.Consumer,{children:function(n){var i=n.patchItem;return Object(a.jsxs)("form",{className:"EditItem_form",onSubmit:function(e){return t.handleSubmit(e,i)},children:[Object(a.jsx)("label",{htmlFor:"form_name",className:"EditItem_label",children:"Name:"}),Object(a.jsx)("input",{id:"form_name",name:"form_name",className:"EditItem_input",type:"text",defaultValue:e.name}),Object(a.jsx)("label",{htmlFor:"form_assign",className:"EditItem_label",children:"Assigned To:"}),Object(a.jsxs)("select",{name:"form_assign",id:"form_assign",defaultValue:""!==e.assign?e.assign:"new",onChange:function(e){return t.handleSelect(e)},children:[s,Object(a.jsx)("option",{value:"new",children:"+ Add New"})]}),Object(a.jsx)("input",{id:"form_assign_input",name:"form_assign_input",className:"EditItem_input ".concat(t.state.showAssignInput?"":"hidden"," "),type:"text"}),Object(a.jsx)("label",{htmlFor:"form_notes",className:"EditItem_label",children:"Notes:"}),Object(a.jsx)("textarea",{id:"form_notes",name:"form_notes",className:"EditItem_input",type:"text",defaultValue:e.notes}),Object(a.jsxs)("div",{className:"EditItem_bottom",children:[Object(a.jsx)("button",{type:"submit",className:"EditItem_button",children:"Submit"}),Object(a.jsx)("button",{type:"button",className:"EditItem_button",onClick:function(){return t.props.toggleEditItemModal()},children:"Cancel"})]})]})}})})}}]),n}(s.Component));B.contextType=f;var H=B,J=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={editListModalIsOpen:!1,addListItemModalIsOpen:!1,itemDetailModalIsOpen:!1,editItemModalIsOpen:!1},t.toggleEditListModal=function(){t.setState({editListModalIsOpen:!t.state.editListModalIsOpen})},t.toggleAddListItemModal=function(){t.setState({addListItemModalIsOpen:!t.state.addListItemModalIsOpen})},t.toggleItemDetailModal=function(){t.setState({itemDetailModalIsOpen:!t.state.itemDetailModalIsOpen})},t.toggleEditItemModal=function(){t.setState({editItemModalIsOpen:!t.state.editItemModalIsOpen})},t.handleOnDragEnd=function(t,e){e(t)},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){k.a.setAppElement("body")}},{key:"render",value:function(){var t=this,e={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},n=this.context.displayItems.map((function(e,n){return Object(a.jsx)(S,{index:n,id:e.id,item_name:e.name,assigned:e.assign,status:e.status,toggleItemDetailModal:t.toggleItemDetailModal,toggleEditItemModal:t.toggleEditItemModal},e.id)}));return Object(a.jsxs)("div",{className:"List",children:[Object(a.jsx)("h3",{children:this.context.list.name}),Object(a.jsx)("button",{onClick:function(){return t.toggleEditListModal()},children:"Edit List Name"}),Object(a.jsx)(f.Consumer,{children:function(e){var s=e.updateDisplayItemsOrder;return Object(a.jsx)(L.a,{onDragEnd:function(e){return t.handleOnDragEnd(e,s)},children:Object(a.jsx)(L.c,{droppableId:"list_droppable_area",isDropDisabled:"all"!==t.context.currentFilter,children:function(t){return Object(a.jsxs)("ul",Object(d.a)(Object(d.a)({className:"List_ul"},t.droppableProps),{},{ref:t.innerRef,children:[n,t.placeholder]}))}})})}}),Object(a.jsx)("button",{onClick:function(){return t.toggleAddListItemModal()},children:"+ Add List Item"}),Object(a.jsx)(k.a,{isOpen:this.state.editListModalIsOpen,style:e,onRequestClose:this.toggleEditListModal,shouldCloseOnOverlayClick:!0,children:Object(a.jsx)(M,{toggleEditListModal:this.toggleEditListModal})}),Object(a.jsx)(k.a,{isOpen:this.state.itemDetailModalIsOpen,style:e,onRequestClose:this.toggleItemDetailModal,shouldCloseOnOverlayClick:!0,children:Object(a.jsx)(R,{toggleEditItemModal:this.toggleEditItemModal,toggleItemDetailModal:this.toggleItemDetailModal})}),Object(a.jsx)(k.a,{isOpen:this.state.editItemModalIsOpen,style:e,onRequestClose:this.toggleEditItemModal,shouldCloseOnOverlayClick:!0,children:Object(a.jsx)(H,{toggleEditItemModal:this.toggleEditItemModal})}),Object(a.jsx)(k.a,{isOpen:this.state.addListItemModalIsOpen,style:e,onRequestClose:this.toggleAddListItemModal,shouldCloseOnOverlayClick:!0,children:Object(a.jsx)(T,{toggleAddListItemModal:this.toggleAddListItemModal})})]})}}]),n}(s.Component);J.contextType=f;var K=J,Y=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){return Object(m.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=void 0!==this.props.location?this.props.location.pathname.substring(1):"12345",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)}};fetch("".concat(O.API_ENDPOINT,"/lists/").concat(e),n).then((function(t){if(!t.ok)throw new Error("Could not retrieve list");return t.json()})).then((function(e){t.context.loadList(e),fetch("".concat(O.API_ENDPOINT,"/lists/listitems/").concat(e.id),n).then((function(t){if(!t.ok)throw new Error("Could not retrieve list");return t.json()})).then((function(e){return t.context.loadListItems(e)})).catch((function(t){return t.message}))})).catch((function(t){return t.message}))}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{}),Object(a.jsx)("div",{className:"ListView",children:Object(a.jsx)("div",{className:"view_container",children:Object(a.jsx)(K,{})})})]})}}]),n}(s.Component);Y.contextType=f;var q=Y,z=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={list:{},allItems:[],displayItems:[],currentItem:{},currentFilter:"all",triggerRender:!1},t.filterItems=function(e){if("all"===e)t.setState({displayItems:t.state.allItems});else if("todo"===e||"doing"===e||"done"===e){var n=t.state.allItems.filter((function(t){return t.status===e}));t.setState({displayItems:n})}else{var a=e.slice(10),s=t.state.allItems.filter((function(t){return t.assign===a}));t.setState({displayItems:s})}},t.updateCurrItem=function(e){var n=t.state.allItems.filter((function(t){return t.id===e}));t.setState({currentItem:n})},t.updateDisplayItemsOrder=function(e){if(e.destination){var n=Array.from(t.state.displayItems),a=n.splice(e.source.index,1),s=Object(u.a)(a,1)[0];n.splice(e.destination.index,0,s);var i=[];n.forEach((function(t){return i.push(t.id)})),t.patchList({item_order:i}),t.setState({allItems:n,displayItems:n})}},t.updateFilter=function(e){t.setState({currentFilter:e})},t.loadList=function(e){t.setState({list:e})},t.loadListItems=function(e){t.setState({allItems:e,displayItems:e}),t.sortByItemOrder()},t.sortByItemOrder=function(){for(var e=t.state.allItems,n=t.state.list,a=[],s=0;s<n.item_order.length;s++)for(var i=0;i<e.length;i++)n.item_order[s]===e[i].id&&a.push(e[i]);t.setState({allItems:a,displayItems:a})},t.triggerRender=function(){t.setState({triggerRender:!t.state.triggerRender})},t.addItem=function(e){var n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)},body:JSON.stringify(e)};fetch("".concat(O.API_ENDPOINT,"/items"),n).then((function(t){if(!t.ok)throw new Error("Could not create list");return t.json()})).then((function(e){var a=e.id,s=t.state.list,i=s.item_order,c=s.url_path;t.state.allItems.push(e),i.push(a);var r=Object(d.a)(Object(d.a)({},n),{},{method:"PATCH",body:JSON.stringify({item_order:i})});fetch("".concat(O.API_ENDPOINT,"/lists/").concat(c),r).then((function(e){if(!e.ok)throw new Error("Could not update list item order");return setTimeout((function(){t.setState({allItems:t.state.allItems,displayItems:t.state.allItems,currentFilter:"all"})}),300),e})).catch((function(t){return t.message})),t.triggerRender()})).catch((function(t){return t.message}))},t.deleteItem=function(e){var n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)}};fetch("".concat(O.API_ENDPOINT,"/items/").concat(e),n).then((function(t){if(!t.ok)throw new Error("Could not delete item");return t})).then((function(n){var a={item_order:t.state.list.item_order.filter((function(t){return t!==e}))};t.patchList(a)})).catch((function(t){return t.message}));var a=t.state.allItems.filter((function(t){return t.id!==e}));t.setState({allItems:a,displayItems:a,currentFilter:"all"})},t.patchList=function(e){var n={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)},body:JSON.stringify(e)};fetch("".concat(O.API_ENDPOINT,"/lists/").concat(t.state.list.url_path),n).then((function(t){if(!t.ok)throw new Error("Could not update list details.");return t})).catch((function(t){return t.message})),t.setState({list:Object(d.a)(Object(d.a)({},t.state.list),e)})},t.patchItem=function(e,n){var a={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.API_KEY)},body:JSON.stringify(n)};fetch("".concat(O.API_ENDPOINT,"/items/").concat(e),a).then((function(t){if(!t.ok)throw new Error("Could not update list details.");return t})).catch((function(t){return t.message}));var s=t.state.allItems.findIndex((function(t){return t.id===e})),i=t.state.displayItems.findIndex((function(t){return t.id===e})),c=Object(o.a)(t.state.allItems),r=Object(o.a)(t.state.displayItems),l=[Object(d.a)(Object(d.a)({},t.state.currentItem[0]),n)];c[s]=Object(d.a)(Object(d.a)({},c[s]),n),r[i]=Object(d.a)(Object(d.a)({},r[i]),n),t.setState({allItems:c,displayItems:r,currentItem:l})},t}return Object(h.a)(n,[{key:"render",value:function(){var t={list:this.state.list,allItems:this.state.allItems,displayItems:this.state.displayItems,currentItem:this.state.currentItem,currentFilter:this.state.currentFilter,filterItems:this.filterItems,updateCurrItem:this.updateCurrItem,updateDisplayItemsOrder:this.updateDisplayItemsOrder,updateFilter:this.updateFilter,loadList:this.loadList,loadListItems:this.loadListItems,addItem:this.addItem,deleteItem:this.deleteItem,patchList:this.patchList,patchItem:this.patchItem};return Object(a.jsx)("main",{className:"App",children:Object(a.jsxs)(f.Provider,{value:t,children:[Object(a.jsx)(b.a,{exact:!0,path:"/",component:x}),Object(a.jsx)(b.a,{exact:!0,path:"/:list_id",component:q})]})})}}]),n}(s.Component);z.contextType=f;var V=z;r.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(V,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.7e17ee7d.chunk.js.map